<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exercise #1 – Registration Form</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; line-height: 1.4; }
    body { max-width: 720px; margin: 40px auto; padding: 0 16px; }
    form { display: grid; gap: 20px; }
    fieldset { border: 1px solid #ccc; border-radius: 12px; padding: 18px; }
    legend { font-weight: 700; padding: 0 6px; }
    .row { display: grid; gap: 12px; grid-template-columns: 1fr 2fr; align-items: center; }
    label { font-weight: 600; }
    input, select, button { padding: 10px; font-size: 16px; border: 1px solid #bbb; border-radius: 8px; }
    .actions { display: flex; gap: 12px; }
    .actions button { border: 0; padding: 12px 16px; border-radius: 10px; cursor: pointer; }
    .actions .submit { background: #0b5cff; color: #fff; }
    .actions .reset { background: #eee; }
    .hint { font-size: 12px; color: #666; }
    .error { color: #b00020; font-weight: 600; }
    @media (max-width: 640px) { .row { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>Registration</h1>

  <form id="regForm" novalidate>
    <!-- Example base section (kept for consistency) -->
    <fieldset>
      <legend>Personal Information</legend>

      <div class="row">
        <label for="fullName">Full name</label>
        <input id="fullName" name="fullName" type="text" placeholder="e.g., Jonas Kazlauskas" required />
      </div>

      <div class="row">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" inputmode="email" placeholder="you@example.com" required />
      </div>

      <!-- Add a dropdown for Country -->
      <div class="row">
        <label for="country">Country</label>
        <select id="country" name="country" required>
          <option value="" selected disabled>Choose your country</option>
          <option value="LT">Lithuania</option>
          <option value="LV">Latvia</option>
          <option value="EE">Estonia</option>
          <option value="PL">Poland</option>
          <option value="DE">Germany</option>
          <option value="FR">France</option>
          <option value="GB">United Kingdom</option>
          <option value="US">United States</option>
          <option value="KR">South Korea</option>
          <option value="JP">Japan</option>
        </select>
      </div>
    </fieldset>

    <!-- New section for “Account Details” using fieldset & legend -->
    <fieldset>
      <legend>Account Details</legend>

      <div class="row">
        <label for="username">Username</label>
        <input id="username" name="username" type="text" minlength="3" maxlength="24"
               pattern="[A-Za-z0-9_\.]{3,24}"
               placeholder="3–24 chars: letters, numbers, _ or ."
               aria-describedby="userHint"
               required />
      </div>
      <p id="userHint" class="hint">Allowed: A–Z, a–z, 0–9, underscore(_), dot(.)</p>

      <div class="row">
        <label for="password">Password</label>
        <input id="password" name="password" type="password" minlength="8"
               placeholder="Min 8 characters" required />
      </div>

      <div class="row">
        <label for="confirmPassword">Confirm Password</label>
        <input id="confirmPassword" name="confirmPassword" type="password" minlength="8" required />
      </div>

      <p id="pwError" class="error" role="alert" aria-live="polite" style="display:none;"></p>
    </fieldset>

    <div class="actions">
      <button type="submit" class="submit">Create account</button>
      <!-- Reset button that clears the form -->
      <button type="reset" class="reset">Reset</button>
    </div>
  </form>

  <script>
    (function () {
      const form = document.getElementById('regForm');
      const pw = document.getElementById('password');
      const pw2 = document.getElementById('confirmPassword');
      const errorBox = document.getElementById('pwError');

      function checkPasswordsMatch() {
        if (pw.value && pw2.value && pw.value !== pw2.value) {
          errorBox.textContent = 'Passwords do not match.';
          errorBox.style.display = 'block';
          pw2.setCustomValidity('Passwords do not match');
        } else {
          errorBox.textContent = '';
          errorBox.style.display = 'none';
          pw2.setCustomValidity('');
        }
      }

      pw.addEventListener('input', checkPasswordsMatch);
      pw2.addEventListener('input', checkPasswordsMatch);

      form.addEventListener('submit', (e) => {
        checkPasswordsMatch();
        if (!form.checkValidity()) {
          e.preventDefault();
          form.reportValidity();
        }
      });

      // Ensure the error is cleared when the form is reset
      form.addEventListener('reset', () => {
        setTimeout(() => { // let browser clear fields first
          errorBox.textContent = '';
          errorBox.style.display = 'none';
          pw2.setCustomValidity('');
        });
      });
    })();
  </script>
</body>
</html>
